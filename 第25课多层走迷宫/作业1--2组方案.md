# 方案

## 1.思路

1.碰撞试验

假设我们有两个图像（类型为Surface）：surface1,surface2

首先，获得这两个surface对象的rect：

```python
rect1=surface1.get_rect()
rect2=surface2.get_rect()
```

然后，获取它们对应的mask对象，用pygame.mask.from_surface()方法，使用如下：

pygame.mask.from_surface(surface)

填入的是Surface对象，返回Mask对象

代码如下：

```python
mask1=pygame.mask.from_surface(surface1)
mask2=pygame.mask.from_surface(surface2)
```

接下来，进行碰撞检测，我们需要用到overlap方法，使用如下：

mask.overlap(other,offset)

mask是一个Mask对象

other是另外一个Mask对象

offset是一个元组，元组中分别为两个rect的x坐标插值和y坐标插值

返回值有两种，如果是一个元组就说明已经碰撞，如果为None就说明没有碰撞

代码如下：

```python
offset=abs(rect1.x-rect2.x),abs(rect1.y-rect2.y)
if rect1.overlap(rect2,offset)!=None: # 已经碰撞
    print("已经碰撞")
```

2.迷宫构建

在txt文件中构建九个,每个含十一个元素的表格,其中无墙壁用□表示,有墙壁用■表示,通过读取表格来判断某个位置是否有墙壁,并且可以自己修改表格内容来修改迷宫样式,如:

[■,■,■,■,■,■,■,■,■,■,■]

[■,□,■,□,□,□,■,□,□,□,■]

[■,□,■,□,■,□,■,□,■,□,■]

[■,□,■,□,■,□,■,□,■,□,■]

[□,□,■,□,■,□,■,□,■,□,□]

[■,□,■,□,■,□,■,□,■,□,■]

[■,□,■,□,■,□,■,□,■,□,■]

[■,□,□,□,■,□,□,□,■,□,■]

[■,■,■,■,■,■,■,■,■,■,■]

顺序

1，pygame库的基础使用(清楚原理并能够理解并运用)

2，绘制迷宫的“地图”

2，对键盘特定按键的捕获与反应(参考之前做过的迷官)

3，对迷宫地图显示墙壁的地方进行处理，使小球不会越过墙壁

4，设置起点终点一一终点应该有进入下一关的功能，小球到达可以显示“通关”类字样

- 数据驱动，先建立一个数据库

- 写迷宫相关程序（计时器，碰撞，结果显示，墙体，关卡设置）

- 关卡设置套娃

实验:

1，键盘捕获与反应(参考以前的作业)

2，地图文件能否正常导入程序(pygame库的应用)

3，小球对墙壁是否有反应(是否有“越墙”)

4，小球到达终点时能否自动跳往下一关(或者弹出是否进入下一关的弹窗)

5，可以尝试一下添加计时(?)

难点：

1. 套娃时分清楚总体和分部
2. 如何做到随便输数据都能生成迷宫
3. 随机生成迷宫后碰撞设置存疑